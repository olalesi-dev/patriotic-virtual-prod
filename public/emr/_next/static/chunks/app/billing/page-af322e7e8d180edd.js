(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{9040:function(e,t,s){Promise.resolve().then(s.bind(s,9219))},7461:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(4090),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:x="",children:u,...h}=s;return(0,a.createElement)("svg",{ref:r,...l,width:o,height:o,stroke:i,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(n(e)),x].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},8219:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4715:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7211:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},7373:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},94:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8670:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2235:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9219:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(3827),l=s(4090),n=s(8219),r=s(4715),i=s(94),o=s(8670),d=s(7373),c=s(7211),x=s(2235);let u=[{id:"000003",issueDate:"2025-12-23",patient:"John Doe",billTo:"John Doe",services:"Level 5 new patient office visit",price:100,dueDate:"2025-12-31",team:"OO",status:"Unpaid"},{id:"000002",issueDate:"2025-12-23",patient:"Sarah Doe",billTo:"Sarah Doe",services:"Level 4 new patient office visit",price:150,dueDate:"2025-12-31",team:"OO",status:"Overdue"},{id:"000001",issueDate:"2025-12-20",patient:"Bobby Doe",billTo:"Bobby Doe",services:"Psychiatric service",price:200,dueDate:"2025-12-28",team:"JD",status:"Paid"},{id:"000004",issueDate:"2025-12-24",patient:"Emily White",billTo:"Emily White",services:"Therapy Session",price:120,dueDate:"2026-01-07",team:"JD",status:"Draft"}],h=[{id:"PAY-001",date:"2025-12-20",patient:"Bobby Doe",amount:200,method:"Credit Card",status:"Completed"},{id:"PAY-002",date:"2025-12-18",patient:"John Smith",amount:50,method:"Bank Transfer",status:"Completed"}],p=[{id:"CLM-001",date:"2025-12-22",patient:"John Doe",insurance:"Blue Cross",amount:100,status:"Submitted"},{id:"CLM-002",date:"2025-12-15",patient:"Sarah Doe",insurance:"Aetna",amount:150,status:"Denied"}];function m(){let[e,t]=(0,l.useState)("Invoices"),[x,m]=(0,l.useState)([]),[y,N]=(0,l.useState)([]),[w,k]=(0,l.useState)([]),[D,C]=(0,l.useState)(!0),[S,Z]=(0,l.useState)(""),[P,T]=(0,l.useState)(!1),[I,O]=(0,l.useState)([]);l.useEffect(()=>{let e=async()=>{C(!0);try{let e="http://localhost:8080/api/v1/billing",{auth:t}=await Promise.all([s.e(139),s.e(576),s.e(221)]).then(s.bind(s,1221)),a=t.currentUser;if(!a){console.warn("No user logged in, using mock data."),m(u),N(h),k(p),C(!1);return}let l=await a.getIdToken(),n={Authorization:"Bearer ".concat(l)},[r,i,o]=await Promise.all([fetch("".concat(e,"/invoices"),{headers:n}),fetch("".concat(e,"/payments"),{headers:n}),fetch("".concat(e,"/claims"),{headers:n})]);r.ok&&m(await r.json()),i.ok&&N(await i.json()),o.ok&&k(await o.json())}catch(e){console.error("Failed to fetch billing data, falling back to mocks",e),m(u),N(h),k(p)}finally{C(!1)}};Promise.all([s.e(139),s.e(576),s.e(221)]).then(s.bind(s,1221)).then(t=>{let{auth:s}=t,a=s.onAuthStateChanged(t=>{t?e():(m(u),C(!1))});return()=>a()})},[]);let L=(0,l.useMemo)(()=>{let t=S.toLowerCase();return"Invoices"===e?x.filter(e=>(e.patient&&e.patient.toLowerCase().includes(t)||e.id&&e.id.includes(t))&&(0===I.length||I.includes(e.status))):"Payments"===e?y.filter(e=>e.patient&&e.patient.toLowerCase().includes(t)):w.filter(e=>e.patient&&e.patient.toLowerCase().includes(t))},[e,x,y,w,S,I]),U=(0,l.useMemo)(()=>({totalPaid:x.filter(e=>"Paid"===e.status).reduce((e,t)=>e+(t.price||0),0),totalUnpaid:x.filter(e=>"Unpaid"===e.status).reduce((e,t)=>e+(t.price||0),0),totalOverdue:x.filter(e=>"Overdue"===e.status).reduce((e,t)=>e+(t.price||0),0)}),[x]),E=async e=>{let t="TEMP-".concat(Date.now()),a={id:t,issueDate:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],patient:e.patient,billTo:e.patient,services:e.service,price:parseFloat(e.amount),team:"Me",status:"Unpaid"},l=[...x];m([a,...x]),T(!1);try{let{auth:l}=await Promise.all([s.e(139),s.e(576),s.e(221)]).then(s.bind(s,1221)),n=l.currentUser;if(!n)throw Error("Not logged in");let r=await n.getIdToken(),i=await fetch("http://localhost:8080/api/v1/billing/invoices",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({patient:e.patient,amount:e.amount,service:e.service,dueDate:a.dueDate})});if(!i.ok)throw Error("Failed to create invoice");let o=await i.json();m(e=>e.map(e=>e.id===t?{...a,id:o.id}:e))}catch(e){console.error("Create invoice failed:",e),m(l),alert("Failed to save invoice to backend.")}};return(0,a.jsxs)("div",{className:"flex flex-col h-[calc(100vh-6rem)] font-sans bg-slate-50 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-white px-8 pt-6 pb-0 border-b border-slate-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-slate-100 p-2 rounded-lg text-slate-600",children:(0,a.jsx)(n.Z,{className:"w-6 h-6"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Billing"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{alert("Exporting ".concat(e," data to CSV..."))},className:"bg-white border border-slate-300 text-slate-700 font-bold py-2 px-4 rounded-lg shadow-sm flex items-center gap-2 hover:bg-slate-50 transition-colors",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"})," Export"]}),(0,a.jsxs)("button",{onClick:()=>T(!0),className:"bg-brand hover:bg-brand-600 text-white font-bold py-2 px-4 rounded-lg shadow-sm flex items-center gap-2 transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"})," New invoice"]})]})]}),(0,a.jsx)("div",{className:"flex gap-8",children:["Invoices","Claims","Payments"].map(s=>(0,a.jsx)("button",{onClick:()=>t(s),className:"pb-3 text-sm font-bold border-b-2 transition-colors ".concat(e===s?"border-brand text-brand":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"),children:s},s))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-8 space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(f,{amount:"0.00",label:"In Transit",badge:"stripe"}),(0,a.jsx)(f,{amount:U.totalPaid.toFixed(2),label:"Total Paid",subLabel:"Lifetime",badge:"USD",color:"text-emerald-600"}),(0,a.jsx)(f,{amount:U.totalUnpaid.toFixed(2),label:"Total Unpaid",subLabel:"Outstanding",badge:"USD",color:"text-slate-900"}),(0,a.jsx)(f,{amount:U.totalOverdue.toFixed(2),label:"Total Overdue",badge:"USD",color:"text-rose-600"})]}),(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-4",children:[(0,a.jsxs)("span",{className:"font-bold text-slate-900 whitespace-nowrap",children:[L.length," ",e]}),(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 text-slate-400 absolute left-3 top-2.5"}),(0,a.jsx)("input",{type:"text",value:S,onChange:e=>Z(e.target.value),placeholder:"Search ".concat(e.toLowerCase(),"..."),className:"w-full pl-10 pr-4 py-2 bg-white border-0 rounded-lg text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-brand placeholder:text-slate-400"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:"Invoices"===e&&(0,a.jsx)(g,{label:"Status",icon:d.Z,options:["Paid","Unpaid","Overdue","Draft"],selected:I,onChange:e=>{O(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}})}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsxs)("button",{className:"flex items-center gap-2 text-brand text-sm font-bold hover:bg-indigo-50 px-3 py-1.5 rounded-lg transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"})," Filter"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden relative min-h-[400px]",children:[(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-xs font-bold text-slate-500 border-b border-slate-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Patient"}),"Invoices"===e&&(0,a.jsx)("th",{className:"px-6 py-4",children:"Status"}),"Invoices"===e&&(0,a.jsx)("th",{className:"px-6 py-4",children:"Services"}),"Invoices"!==e&&(0,a.jsx)("th",{className:"px-6 py-4",children:"Details"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:L.map(t=>{var s,l;return(0,a.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-slate-700 font-medium whitespace-nowrap",children:t.issueDate||t.date}),(0,a.jsx)("td",{className:"px-6 py-4 font-bold text-brand hover:underline cursor-pointer",children:t.id}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-700",children:t.patient}),"Invoices"===e&&(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(b,{status:t.status})}),"Invoices"===e&&(0,a.jsx)("td",{className:"px-6 py-4 text-slate-600 text-sm truncate max-w-xs",children:t.services}),"Invoices"!==e&&(0,a.jsx)("td",{className:"px-6 py-4 text-slate-600 text-sm",children:t.method||t.insurance||"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 font-bold text-slate-900 text-right",children:["$",(null===(s=t.price)||void 0===s?void 0:s.toFixed(2))||(null===(l=t.amount)||void 0===l?void 0:l.toFixed(2))]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-100",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})})]},t.id)})})]}),0===L.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[(0,a.jsx)(o.Z,{className:"w-8 h-8 mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No items found."})]})]})]})}),P&&(0,a.jsx)(j,{onClose:()=>T(!1),onSave:E}),(0,a.jsx)("div",{className:"absolute right-8 bottom-8 flex flex-col gap-3 z-10",children:(0,a.jsx)(v,{icon:i.Z,onClick:()=>T(!0)})})]})}function b(e){let{status:t}=e,s="bg-slate-100 text-slate-600";return("Paid"===t||"Completed"===t)&&(s="bg-emerald-100 text-emerald-700"),("Overdue"===t||"Denied"===t)&&(s="bg-rose-100 text-rose-700"),("Unpaid"===t||"Submitted"===t)&&(s="bg-orange-100 text-orange-700"),"Processing"===t&&(s="bg-blue-100 text-blue-700"),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold ".concat(s),children:t})}function f(e){let{amount:t,label:s,subLabel:l,badge:n,color:r="text-slate-900"}=e;return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center justify-center text-center relative h-32",children:["stripe"===n&&(0,a.jsx)("span",{className:"absolute top-3 right-3 bg-indigo-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded",children:"stripe"}),"USD"===n&&(0,a.jsx)("span",{className:"absolute top-3 right-3 bg-slate-100 text-slate-500 text-[10px] font-bold px-1.5 py-0.5 rounded border border-slate-200",children:"USD"}),(0,a.jsxs)("div",{className:"text-3xl font-bold mb-1 ".concat(r),children:["$",t]}),(0,a.jsxs)("div",{className:"text-sm font-bold text-slate-600",children:[s," ",(0,a.jsx)("span",{className:"text-slate-400 font-normal",children:l})]})]})}function g(e){let{label:t,icon:s,options:n,selected:r,onChange:o}=e,[d,c]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>c(!d),className:"flex items-center gap-1.5 px-3 py-1.5 border border-dashed rounded-full text-xs font-bold transition-all shadow-sm ".concat(r.length>0?"bg-brand-50 border-brand text-brand":"bg-white border-slate-200 text-slate-500 hover:border-brand hover:text-brand"),children:[(0,a.jsx)(i.Z,{className:"w-3 h-3 rounded-full p-0.5 ".concat(r.length>0?"bg-brand text-white":"bg-slate-400 text-white")}),(0,a.jsx)("span",{children:t}),r.length>0&&(0,a.jsx)("span",{className:"bg-brand text-white text-[9px] px-1 rounded-full",children:r.length})]}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,a.jsx)("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 z-20 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:(0,a.jsx)("div",{className:"p-2 space-y-1",children:n.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-slate-50 rounded-lg cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.includes(e),onChange:()=>o(e),className:"w-4 h-4 rounded border-slate-300 text-brand focus:ring-brand"}),(0,a.jsx)("span",{className:"text-sm text-slate-700 font-medium",children:e})]},e))})})]})]})}function v(e){let{icon:t,onClick:s}=e;return(0,a.jsx)("button",{onClick:s,className:"w-12 h-12 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center hover:bg-slate-50 transition-colors group relative",children:(0,a.jsx)(t,{className:"w-5 h-5 text-slate-500 group-hover:text-slate-700"})})}function j(e){let{onClose:t,onSave:s}=e,[n,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[d,c]=(0,l.useState)("");return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100",children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-slate-800",children:"New Invoice"}),(0,a.jsx)("button",{onClick:t,children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-slate-400 hover:text-slate-600"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-500",children:"Patient"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Patient Name",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-500",children:"Amount ($)"}),(0,a.jsx)("input",{type:"number",value:i,onChange:e=>o(e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-500",children:"Service Description"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"e.g. Therapy Session",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 font-bold text-sm bg-white hover:bg-slate-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{n&&i&&s({patient:n,amount:i,service:d})},className:"px-6 py-2 bg-brand hover:bg-brand-600 text-white font-bold rounded-lg text-sm shadow-sm",children:"Create Invoice"})]})]})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=9040)}),_N_E=e.O()}]);